/*! leaflet-dvf 17-01-2016 */
/*
 @preserve Leaflet Data Visualization Framework, a JavaScript library for creating thematic maps using Leaflet
 (c) 2013-2015, Scott Fairgrieve, HumanGeo
 */
L.LinearFunction=L.Class.extend({options:{constrainX:!1},initialize:function(a,b,c){this.setOptions(c),this.setRange(a,b)},_calculateParameters:function(a,b){0===this._xRange?(this._slope=0,this._b=a.y):(this._slope=(b.y-a.y)/this._xRange,this._b=a.y-this._slope*a.x)},_arrayToPoint:function(a){return{x:a[0],y:a[1]}},setOptions:function(a){L.Util.setOptions(this,a),this._preProcess=this.options.preProcess,this._postProcess=this.options.postProcess},getBounds:function(){var a=Math.min(this._minPoint.x,this._maxPoint.x),b=Math.max(this._minPoint.x,this._maxPoint.x),c=Math.min(this._minPoint.y,this._maxPoint.y),d=Math.max(this._minPoint.y,this._maxPoint.y);return[new L.Point(a,c),new L.Point(b,d)]},setRange:function(a,b){return a=a instanceof Array?this._arrayToPoint(a):a,b=b instanceof Array?this._arrayToPoint(b):b,this._minPoint=a,this._maxPoint=b,this._xRange=b.x-a.x,this._yRange=b.y-a.y,this._calculateParameters(a,b),this},setMin:function(a){return this.setRange(a,this._maxPoint),this},setMax:function(a){return this.setRange(this._minPoint,a),this},setPreProcess:function(a){return this._preProcess=a,this},setPostProcess:function(a){return this._postProcess=a,this},constrainX:function(a){return a=Number(a),this.options.constrainX&&(a=Math.max(a,this._minPoint.x),a=Math.min(a,this._maxPoint.x)),a},evaluate:function(a){var b;return this._preProcess&&(a=this._preProcess(a)),b=Number((this._slope*a).toFixed(6))+Number(this._b.toFixed(6)),this._postProcess&&(b=this._postProcess(b,a)),b},random:function(){var a=Math.random()*this._xRange+this._minPoint.x;return this.evaluate(a)},sample:function(a){a=Math.max(a,2);for(var b=a-1,c=this._xRange/b,d=this._minPoint.x,e=[];d<=this._maxPoint.x;)e.push(this.evaluate(d)),d+=c;return e},evaluatePercent:function(a){return this.getPointAtPercent(a).y},getPointAtPercent:function(a){var b=this._xRange*a,c=this._yRange*a,d=this._minPoint.x+b,e=this._minPoint.y+c;return new L.Point(d,e)},samplePoints:function(a){a=Math.max(a,2);for(var b=a-1,c=this._xRange/b,d=this._minPoint.x,e=[];d<=this._maxPoint.x;)e.push(new L.Point(d,this.evaluate(d))),d+=c;return e},getIntersectionPoint:function(a){var b=null;if(this._slope!==a._slope){var c=(this._b-a._b)/(a._slope-this._slope),d=this.evaluate(c);b=new L.Point(c,d)}return b}}),L.ColorFunction=L.LinearFunction.extend({options:{alpha:1,includeAlpha:!1},initialize:function(a,b,c){L.Util.setOptions(this,c),this._parts=[],this._dynamicPart=null,this._outputPrecision=0,this._prefix=null,this._formatOutput=function(a){return a.toFixed(this._outputPrecision)},this._mapOutput=function(a){for(var b=[],c=0,d=this._parts.length;d>c;++c){var e=this._parts[c];b.push(a[e])}return this.options.includeAlpha&&b.push(this.options.alpha),b},this._getColorString=function(a){a=this._formatOutput(a),this.options[this._dynamicPart]=a;var b=this._mapOutput(this.options);return this._writeColor(this._prefix,b)},this._writeColor=function(a,b){return this.options.includeAlpha&&(a+="a"),a+"("+b.join(",")+")"},c=L.extend({},this.options);var d=function(a){c&&c.postProcess&&(a=c.postProcess.call(this,a));var b=this._getColorString(a);return(L.Browser.ie&&b.indexOf("hsl")>-1||c.rgb)&&(b=L.hslColor(b).toRGBString()),b};L.LinearFunction.prototype.initialize.call(this,a,b,{preProcess:this.options.preProcess,postProcess:d})}}),L.HSLColorFunction=L.ColorFunction.extend({initialize:function(a,b,c){L.ColorFunction.prototype.initialize.call(this,a,b,c),this._parts=["outputHue","outputSaturation","outputLuminosity"],this._prefix="hsl",this._outputPrecision=2}}),L.RGBColorFunction=L.ColorFunction.extend({initialize:function(a,b,c){L.ColorFunction.prototype.initialize.call(this,a,b,c),this._parts=["outputRed","outputBlue","outputGreen"],this._prefix="rgb",this._outputPrecision=0}}),L.RGBRedFunction=L.LinearFunction.extend({options:{outputGreen:0,outputBlue:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c),this._dynamicPart="outputRed"}}),L.RGBBlueFunction=L.LinearFunction.extend({options:{outputRed:0,outputGreen:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c),this._dynamicPart="outputBlue"}}),L.RGBGreenFunction=L.LinearFunction.extend({options:{outputRed:0,outputBlue:0},initialize:function(a,b,c){L.RGBColorFunction.prototype.initialize.call(this,a,b,c),this._dynamicPart="outputGreen"}}),L.RGBColorBlendFunction=L.LinearFunction.extend({initialize:function(a,b,c,d){c=new L.RGBColor(c),d=new L.RGBColor(d);var e=c.r(),f=d.r(),g=c.g(),h=d.g(),i=c.b(),j=d.b();this._minX=a,this._maxX=b,this._redFunction=new L.LinearFunction(new L.Point(a,e),new L.Point(b,f)),this._greenFunction=new L.LinearFunction(new L.Point(a,g),new L.Point(b,h)),this._blueFunction=new L.LinearFunction(new L.Point(a,i),new L.Point(b,j))},getBounds:function(){var a=this._redFunction.getBounds(),b=this._greenFunction.getBounds(),c=this._blueFunction.getBounds(),d=Math.min(a[0].y,b[0].y,c[0].y),e=Math.max(a[0].y,b[0].y,c[0].y);return[new L.Point(a[0].x,d),new L.Point(a[1].x,e)]},evaluate:function(a){return new L.RGBColor([this._redFunction.evaluate(a),this._greenFunction.evaluate(a),this._blueFunction.evaluate(a)]).toRGBString()}}),L.HSLHueFunction=L.HSLColorFunction.extend({options:{outputSaturation:"100%",outputLuminosity:"50%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c),this._dynamicPart="outputHue"}}),L.HSLSaturationFunction=L.LinearFunction.extend({options:{outputHue:0,outputLuminosity:"50%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c),this._formatOutput=function(a){return(100*a).toFixed(this._outputPrecision)+"%"},this._dynamicPart="outputSaturation"}}),L.HSLLuminosityFunction=L.LinearFunction.extend({options:{outputHue:0,outputSaturation:"100%"},initialize:function(a,b,c){L.HSLColorFunction.prototype.initialize.call(this,a,b,c),this._formatOutput=function(a){return(100*a).toFixed(this._outputPrecision)+"%"},this._dynamicPart="outputLuminosity"}}),L.HSLColorBlendFunction=L.LinearFunction.extend({initialize:function(a,b,c,d){c=new L.HSLColor(c),d=new L.HSLColor(d);var e=c.h(),f=d.h(),g=c.s(),h=d.s(),i=c.l(),j=d.l();this._minX=a,this._maxX=b,this._hueFunction=new L.LinearFunction(new L.Point(a,e),new L.Point(b,f)),this._saturationFunction=new L.LinearFunction(new L.Point(a,g),new L.Point(b,h)),this._luminosityFunction=new L.LinearFunction(new L.Point(a,i),new L.Point(b,j))},getBounds:function(){var a=this._hueFunction.getBounds(),b=this._saturationFunction.getBounds(),c=this._luminosityFunction.getBounds(),d=Math.min(a[0].y,b[0].y,c[0].y),e=Math.max(a[0].y,b[0].y,c[0].y);return[new L.Point(a[0].x,d),new L.Point(a[1].x,e)]},evaluate:function(a){return new L.HSLColor([this._hueFunction.evaluate(a),this._saturationFunction.evaluate(a),this._luminosityFunction.evaluate(a)]).toHSLString()}}),L.PiecewiseFunction=L.LinearFunction.extend({options:{constrainX:!0},initialize:function(a,b){L.Util.setOptions(this,b),this._functions=a;var c,d;c=a[0].getBounds()[0],d=a[a.length-1].getBounds()[1],L.LinearFunction.prototype.initialize.call(this,c,d,{preProcess:this.options.preProcess,postProcess:this.options.postProcess})},_getFunction:function(a){var b,c,d,e;if(a<this._minPoint.x)e=this._functions[0];else if(a>=this._maxPoint.x)e=this._functions[this._functions.length-1];else for(var f=0;f<this._functions.length&&(e=this._functions[f],b=e.getBounds(),c=b[0],d=b[1],!(a>=c.x&&a<d.x));++f);return e},evaluate:function(a){var b,c=null;return a=this.constrainX(a),this._preProcess&&(a=this._preProcess(a)),b=this._getFunction(a),b&&(c=b.evaluate(a),this._postProcess&&(c=this._postProcess(c,a))),c}}),L.ColorClassFunction=L.PiecewiseFunction.extend({options:{interpolate:!1},initialize:function(a,b,c){var d,e=[];L.Util.setOptions(this,c);for(var f=0,g=a.length-1;g>f;++f){var h=a[f],i=a[f+1],j=b[f],k=this.options.interpolate?b[Math.min(b.length-1,f+1)]:b[f];d=new L.RGBColorBlendFunction(h,i,j,k),e.push(d)}L.PiecewiseFunction.prototype.initialize.call(this,e)}}),L.CustomColorFunction=L.PiecewiseFunction.extend({options:{interpolate:!0},initialize:function(a,b,c,d){L.setOptions(this,d);for(var e,f,g=this.options.interpolate?c.length-1:c.length,h=[],i=new L.LinearFunction([0,a],[g,b]),j=0;g>j;++j)f=j+1,e=this.options.interpolate?new L.RGBColorBlendFunction(i.evaluate(j),i.evaluate(f),c[j],c[f]):new L.RGBColorBlendFunction(i.evaluate(j),i.evaluate(f),c[j],c[j]),h.push(e);i=null,L.PiecewiseFunction.prototype.initialize.call(this,h)}}),L.CategoryFunction=L.Class.extend({initialize:function(a,b){L.Util.setOptions(this,b),this._categoryKeys=Object.keys(a),this._categoryMap=a,this._preProcess=this.options.preProcess,this._postProcess=this.options.postProcess},evaluate:function(a){var b;return this._preProcess&&(a=this._preProcess(a)),b=this._categoryMap[a],this._postProcess&&(b=this._postProcess(b,a)),b},getCategories:function(){return this._categoryKeys}}),L.categoryFunction=function(a,b){return new L.CategoryFunction(a,b)},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){var f,g,h;if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");f=[];for(g in e)a.call(e,g)&&f.push(g);if(b)for(h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),L.Util.guid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},L.Util.getProperty=function(a,b,c){return b in a?a[b]:c},L.Util.setFieldValue=function(a,b,c){for(var d,e=b.split("."),f=a,g=0,h=e.length-1;h>g;++g)d=e[g],f[d]=f[d]||{},f=f[d];f[e[e.length-1]]=c},L.Util.getFieldValue=function(a,b){var c=null;if(b){for(var d,e,f,g,h,i,j,k=b.split("."),l=a,m=-1,n=0,o=k.length;o>n;++n)if(d=k[n],m=d.indexOf("["),m>-1){i=d.substring(m),d=d.substring(0,m),i=i.replace("[","").replace("]",""),e=i.split("="),f=e[0],g=e[1],l=l[d];for(var p=0;p<l.length;++p)h=l[p],j=h[f],j&&j===g&&(l=h)}else{if(!l||!l.hasOwnProperty(d)){l=null;break}l=l[d]}c=l}else c=a;return c},L.Util.getNumericRange=function(a,b){var c=Number.MAX_VALUE,d=Number.MIN_VALUE;for(var e in a)if(a.hasOwnProperty(e)){var f=a[e],g=L.Util.getFieldValue(f,b);c=Math.min(c,g),d=Math.max(d,g)}return[c,d]},L.Util.pointToGeoJSON=function(){var a={type:"Feature",geometry:{type:"Point",coordinates:[this._latlng[1],this._latlng[0]]},properties:{}};for(var b in this.options)if(this.options.hasOwnProperty(b)){var c=this.options[b];"function"!=typeof c&&(a.properties[b]=c)}return a},L.Util.updateLayer=function(a,b){a.eachLayer&&!a instanceof L.FeatureGroup?a.eachLayer(function(a){L.Util.updateLayer(a,b)}):b.call(this,a)},L.CategoryLegend=L.Class.extend({initialize:function(a){L.setOptions(this,a)},generate:function(a){a=a||{};var b=document.createElement("div"),c=L.DomUtil.create("div","legend",b),d=a.className,e=this.options;d&&L.DomUtil.addClass(c,d),a.title&&(L.DomUtil.create("div","legend-title",c).innerHTML=a.title);for(var f in e){categoryOptions=e[f];var g=categoryOptions.displayName||f,h=L.DomUtil.create("div","data-layer-legend",c),i=L.DomUtil.create("div","legend-box",h);L.DomUtil.create("div","key",h).innerHTML=g,L.StyleConverter.applySVGStyle(i,categoryOptions)}return b.innerHTML}}),L.LegendIcon=L.DivIcon.extend({initialize:function(a,b,c){var d,e=document.createDocumentFragment(),f=document.createElement("div","",e),g=L.DomUtil.create("div","legend",f),h=L.DomUtil.create("div","title",g),i=L.DomUtil.create("div","legend-box",g),j=L.DomUtil.create("div","legend-values",g),k=b.title||b.name;k&&(h.innerHTML=k);for(var l in a)d=a[l],L.DomUtil.create("div","key",j).innerHTML=d.name||l,L.DomUtil.create("div","value",j).innerHTML=d.value;L.StyleConverter.applySVGStyle(i,b),c.html=f.innerHTML,c.className=c.className||"legend-icon",L.DivIcon.prototype.initialize.call(this,c)}}),L.legendIcon=function(a,b,c){return new L.LegendIcon(a,b,c)},L.GeometryUtils={getName:function(a){var b=null;if(a&&a.features)for(var c=0;c<a.features.length;++c){var d=a.features[c];if(d.properties&&d.properties.name){b=d.properties.name;break}}return b},getGeoJSONLocation:function(a,b,c,d){var e=function(a){return L.Util.getFieldValue(a,c)};c&&"function"==typeof c&&(e=c);var f=new L.GeoJSON(a,{pointToLayer:function(a,e){var f={location:e,text:c?L.Util.getFieldValue(b,c):[e.lat.toFixed(3),e.lng.toFixed(3)].join(", "),center:e};return d(f,b)}}),g=null;try{g=L.GeometryUtils.loadCentroid(a)}catch(h){console.log("Error loading centroid for "+JSON.stringify(a))}return{location:f,text:c?L.Util.getFieldValue(b,c):null,center:g}},mergeProperties:function(a,b,c){var d,e,f=b.features,g=L.GeometryUtils.indexFeatureCollection(f,c),h={type:"FeatureCollection",features:[]};for(var i in a)if(a.hasOwnProperty(i)&&(d=a[i],e=d[c])){var j=g[e];for(var k in d)j.properties[k]=d[k];h.features.push(j)}return h},indexFeatureCollection:function(a,b){for(var c,d,e,f=a.features,g={},h=0;h<f.length;++h)if(c=f[h],d=c.properties,e=d[b],e in g){var i=g[e];"GeometryCollection"!==i.geometry.type?g[e]={type:"Feature",geometry:{type:"GeometryCollection",geometries:[c.geometry,i.geometry]}}:i.geometry.geometries.push(c.geometry)}else g[e]=c;return g},arrayToMap:function(a,b,c){for(var d,e,f,g={},h=0;h<a.length;++h)d=a[h],e=d[b],f=c?d[c]:d,g[e]=f;return g},arrayToMaps:function(a,b){for(var c,d,e,f,g,h,i,j=[],k=0,l=b.length;l>k;++k)j.push({});for(var m=0;m<a.length;++m){d=a[m];for(var n=0;n<b.length;++n)c=j[n],g=b[n],h=g.from,i=g.to,e=d[h],f=i?d[i]:d,c[e]=f}return j},loadCentroid:function(a){var b,c,d,e=null;if(a.geometry&&"Point"===a.geometry.type)e=new L.LatLng(a.geometry.coordinates[1],a.geometry.coordinates[0]);else if("undefined"!=typeof jsts){var f=new jsts.io.GeoJSONParser,g=f.read(a);if(g.getCentroid)b=g.getCentroid(),c=b.coordinate.x,d=b.coordinate.y;else if(g.features){for(var h=0,i=0,j=0,k=g.features.length;k>j;++j)b=g.features[j].geometry.getCentroid(),h+=b.coordinate.x,i+=b.coordinate.y;c=h/g.features.length,d=i/g.features.length}else b=g.geometry.getCentroid(),c=b.coordinate.x,d=b.coordinate.y;e=new L.LatLng(d,c)}return e},loadCentroids:function(a){var b,c={};for(var d in a)b=a[d],c[d]=L.GeometryUtils.loadCentroid(b);return c}},L.SVGPathBuilder=L.Class.extend({initialize:function(a,b,c){this._points=a||[],this._innerPoints=b||[],L.setOptions(this,c)},options:{closePath:!0},_getPathString:function(a,b){var c="";if(a.length>0){var d=a[0];b=null!==b?b:2;var e="M",f="L",g="Z";L.Browser.vml&&(b=0,e="m",f="l",g="xe"),c=e+d.x.toFixed(b)+" "+d.y.toFixed(b);for(var h=1;h<a.length;h++)d=a[h],c+=f+d.x.toFixed(b)+" "+d.y.toFixed(b);this.options.closePath&&(c+=g)}return c},addPoint:function(a,b){b?this._innerPoints.push(a):this._points.push(a)},build:function(a){a=a||this.options.digits;var b=this._getPathString(this._points,a);return this._innerPoints&&(b+=this._getPathString(this._innerPoints,a)),b}}),L.StyleConverter={keyMap:{fillColor:{property:["background-color"],valueFunction:function(a){return a}},color:{property:["color","border-top-color","border-right-color","border-bottom-color","border-left-color"],valueFunction:function(a){return a}},weight:{property:["border-width"],valueFunction:function(a){return Math.ceil(a)+"px"}},lineWeight:{property:["border-width"],valueFunction:function(a){return Math.ceil(a)+"px"}},stroke:{property:["border-style"],valueFunction:function(a){return a===!0?"solid":"none"}},dashArray:{property:["border-style"],valueFunction:function(a){var b="solid";return a&&(b="dashed"),b}},barThickness:{property:["height"],valueFunction:function(a){return a+"px"}},radius:{property:["height"],valueFunction:function(a){return 2*a+"px"}},radiusY:{property:["height"],valueFunction:function(a){return 2*a+"px"}},fillOpacity:{property:["opacity"],valueFunction:function(a){return a}}},applySVGStyle:function(a,b,c){var d=L.StyleConverter.keyMap;c&&(d=L.Util.extend(d,c)),a.style.borderStyle="solid";for(var e in b)L.StyleConverter.setCSSProperty(a,e,b[e],d);return a},setCSSProperty:function(a,b,c,d){d=d||L.StyleConverter.keyMap;var e=d[b],f="";if(e)for(var g=e.property,h=0,i=g.length;i>h;++h)f+=g[h]+":"+e.valueFunction(c)+";";return a.style.cssText+=f,a}},L.StylesBuilder=L.Class.extend({initialize:function(a,b){this._categories=a,this._styleFunctionMap=b,this._buildStyles()},_buildStyles:function(){for(var a,b,c,d={},e=0;e<this._categories.length;++e){a=this._categories[e],d[a]={};for(var f in this._styleFunctionMap)b=this._styleFunctionMap[f],c=b.evaluate?b.evaluate(e):"function"==typeof b?b(e):b,d[a][f]=c}this._styleMap=d},getStyles:function(){return this._styleMap}}),L.PaletteBuilder=L.Class.extend({initialize:function(a){this._styleFunctionMap=a},generate:function(a){a=a||{};var b=document.createElement("div"),c=L.DomUtil.create("div","palette",b),d=a.count||10,e=function(a){for(var b=[],c=0;a>c;++c)b.push(c);return b}(d),f=new L.StylesBuilder(e,this._styleFunctionMap),g=f.getStyles();a.className&&L.DomUtil.addClass(c,a.className);for(var h in g){var i=L.DomUtil.create("i","palette-element",c),j=g[h];L.StyleConverter.applySVGStyle(i,j)}return b.innerHTML}}),L.HTMLUtils={buildTable:function(a,b,c){function d(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}b=b||"table table-condensed table-striped table-bordered";for(var e=document.createDocumentFragment(),f=L.DomUtil.create("table",b,e),g=L.DomUtil.create("thead","",f),h=L.DomUtil.create("tbody","",f),i=L.DomUtil.create("tr","",g),j=["Name","Value"],k=0,l=j.length;l>k;k++){var m=L.DomUtil.create("th","",i);m.innerHTML=j[k]}c=c||[];for(var n in a)if(a.hasOwnProperty(n)&&!d(c,n)){var o=a[n];if("object"==typeof o){var p=document.createElement("div");p.appendChild(L.HTMLUtils.buildTable(o,c)),o=p.innerHTML}var q=L.DomUtil.create("tr","",h),r=[n,o];for(k=0,l=r.length;l>k;k++){var s=L.DomUtil.create("td","",q);s.innerHTML=r[k]}}return f}},L.AnimationUtils={easingFunctions:{linear:function(a,b){return a/b},easeIn:function(a,b){return Math.pow(a/b,5)},easeOut:function(a,b){return 1-Math.pow(1-a/b,5)},easeInOut:function(a,b){return a/=b/2,1>a?.5*Math.pow(a,4):(a-=2,-.5*(Math.pow(a,4)-2))}},animate:function(a,b){var c=b.from||{},d=b.to||{},e=b.duration||500,f={},g=b.easing||L.AnimationUtils.easingFunctions.linear,h=b.animationEnd;for(var i in c)if("color"!==i&&"fillColor"!==i&&"position"!==i&&d[i])f[i]=new L.LinearFunction([0,c[i]],[1,d[i]]);else if("color"!==i&&"fillColor"!==i||c[i]===d[i])"position"===i&&d[i]&&(f[i]=new L.LinearFunction([c[i].x,c[i].y],[d[i].x,d[i].y],{postProcess:function(a,b){return{x:b,y:a}}}));else{var j=L.Color.getColor(c[i]),k=L.Color.getColor(d[i]);f[i]=new L.RGBColorBlendFunction(0,1,j.toRGBString(),k.toRGBString())}var l={},m=+new Date,n=function(){var b=+new Date-m,c=g(b,e);if(1>c){for(var d in f)l[d]=f[d].evaluate(c);a.options=L.extend({},a.options,l),a.setStyle(a.options).redraw(),a._animId=L.Util.requestAnimFrame(n)}else L.Util.cancelAnimFrame(a._animId),a._animId=null,h&&h()};a._animId=L.Util.requestAnimFrame(n)},buildDistanceIndex:function(a){var b={},c=0;b.index=[0];for(var d=0,e=a.length;e-1>d;++d)c+=a[d].distanceTo(a[d+1]),b.index.push(c);return b.totalDistance=c,b},distanceToPoints:function(a,b,c,d){var e={};if(c>=b.totalDistance)e.distances=[b.totalDistance,b.totalDistance],e.points=[a[a.length-1],a[a.length-1]],e.index=a.length-1;else for(var f=d,g=b.index.length;g-1>f;++f)if(c>=b.index[f]&&c<b.index[f+1]){e.distances=[b.index[f],b.index[f+1]],e.points=[a[f],a[f+1]],e.index=f;break}return e},getInterpolator:function(a){return new L.LinearFunction([a[0].lng,a[0].lat],[a[1].lng,a[1].lat])},animateLine:function(a,b){var c=b.from||{},d=b.to||{},e=b.path||a._latlngs||[],f=b.duration||1e3,g=b.easing||L.AnimationUtils.easingFunctions.linear,h=b.animationEnd,i=+new Date,j=this,k={},l=this.buildDistanceIndex(e),m=l.totalDistance/f,n=b.update||function(a,b,c){a.setLatLng(new L.LatLng(c.y,c.x))};for(var o in c)if("color"!==o&&"fillColor"!==o&&"position"!==o&&d[o])k[o]=new L.LinearFunction([0,c[o]],[1,d[o]]);else if("color"!==o&&"fillColor"!==o||c[o]===d[o])"position"===o&&d[o]&&(k[o]=new L.LinearFunction([c[o].x,c[o].y],[d[o].x,d[o].y],{postProcess:function(a,b){return{x:b,y:a}}}));else{var p=L.Color.getColor(c[o]),q=L.Color.getColor(d[o]);k[o]=new L.RGBColorBlendFunction(0,1,p.toRGBString(),q.toRGBString())}var r=0,s=function(){var b=+new Date-i,c=b*m,d=j.distanceToPoints(e,l,c,r),o=d.distances[0]/l.totalDistance,p=d.distances[1]/l.totalDistance,q=j.getInterpolator(d.points),t=g(b,f),u=(t-o)/(p-o||1),v=q.getPointAtPercent(u),w={};if(n(a,d.points,v),r=d.index,t>=1)L.Util.cancelAnimFrame(a._animId),h&&h();else{for(var x in k)w[x]=k[x].evaluate(t);a.options=L.extend({},a.options,w),a.setStyle(a.options),a._animId=L.Util.requestAnimFrame(s)}q=null,v=null};a._animId=L.Util.requestAnimFrame(s)}},L.Color=L.Class.extend({statics:{getColor:function(a){return a.indexOf("#")>-1||a.indexOf("rgb")>-1?new L.RGBColor(a):new L.HSLColor(a)}},initialize:function(a){this._rgb=[0,0,0],this._hsl=[0,1,.5],this._a=1,a&&this.parseColorDef(a)},parseColorDef:function(){},rgbToHSL:function(a,b,c){a/=255,b/=255,c/=255;var d,e,f=Math.max(a,b,c),g=Math.min(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return[d,e,h]},hslToRGB:function(a,b,c){var d,e,f,g=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a};if(0===b)d=e=f=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=g(i,h,a+1/3),e=g(i,h,a),f=g(i,h,a-1/3)}return[Math.floor(255*d),Math.floor(255*e),Math.floor(255*f)]},setRGB:function(a,b,c){return this._rgb=[a,b,c],this._hsl=this.rgbToHSL(a,b,c),this},setHSL:function(a,b,c){return this._hsl=[a,b,c],this._rgb=this.hslToRGB(a,b,c),this},toHSL:function(){return this._hsl},toHSLString:function(){var a="hsl";return this._a<1&&(a+="a"),a+"("+(360*this._hsl[0]).toFixed(1)+","+(100*this._hsl[1]).toFixed(0)+"%,"+(100*this._hsl[2]).toFixed(0)+"%)"},toRGB:function(){return this._rgb},toRGBString:function(){var a;if(this._a<1)a="rgba("+this._rgb[0].toFixed(0)+","+this._rgb[1].toFixed(0)+","+this._rgb[2].toFixed(0)+","+this._a.toFixed(1)+")";else{for(var b=[this._rgb[0].toString(16),this._rgb[1].toString(16),this._rgb[2].toString(16)],c=0,d=b.length;d>c;++c)1===b[c].length&&(b[c]="0"+b[c]);a="#"+b.join("")}return a},r:function(a){return arguments.length?this.setRGB(a,this._rgb[1],this._rgb[2]):this._rgb[0]},g:function(a){return arguments.length?this.setRGB(this._rgb[0],a,this._rgb[2]):this._rgb[1]},b:function(a){return arguments.length?this.setRGB(this._rgb[0],this._rgb[1],a):this._rgb[2]},h:function(a){return arguments.length?this.setHSL(a,this._hsl[1],this._hsl[2]):this._hsl[0]},s:function(a){return arguments.length?this.setHSL(this._hsl[0],a,this._hsl[2]):this._hsl[1]},l:function(a){return arguments.length?this.setHSL(this._hsl[0],this._hsl[1],a):this._hsl[2]},a:function(a){return arguments.length?(this._a=a,this):this._a}}),L.RGBColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(a){var b,c,d,e,f=a instanceof Array,g=0===a.indexOf("#"),h=[];f?(b=Math.floor(a[0]),c=Math.floor(a[1]),d=Math.floor(a[2]),e=4===a.length?a[3]:1):g?(a=a.replace("#",""),b=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),d=parseInt(a.substring(4,6),16),e=8===a.length?parseInt(a.substring(6,8),16):1):(h=a.replace("rgb","").replace("a","").replace(/\s+/g,"").replace("(","").replace(")","").split(","),b=parseInt(h[0]),c=parseInt(h[1]),d=parseInt(h[2]),e=4===h.length?parseInt(h[3]):1),this.setRGB(b,c,d),this._a=e}}),L.rgbColor=function(a){return new L.RGBColor(a)},L.HSLColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(a){var b,c,d,e,f=a instanceof Array;if(f)b=a[0],c=a[1],d=a[2],e=4===a.length?a[3]:1;else{var g=a.replace("hsl","").replace("a","").replace("(","").replace(/\s+/g,"").replace(/%/g,"").replace(")","").split(",");b=Number(g[0])/360,c=Number(g[1])/100,d=Number(g[2])/100,e=4===g.length?parseInt(g[3]):1}this.setHSL(b,c,d),this._a=e}}),L.hslColor=function(a){return new L.HSLColor(a)},L.Animation=L.Evented.extend({initialize:function(a,b){this._easeFunction=a,this._animateFrame=b},run:function(a,b){b=b||{},this.stop(),this._el=a,this._inProgress=!0,this._duration=b.duration||0,this._animationOptions=b,this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;0===b||b>a?this._runFrame(this._easeFunction(a/(b||1))):(this._runFrame(1),this._complete())},_runFrame:function(a){this._animateFrame(a),this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")}}),// @preserve This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).
L.ColorBrewer={Sequential:{YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},Diverging:{PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]}},Qualitative:{Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}},L.Palettes={huePalette:function(a,b,c,d,e){return new L.HSLHueFunction(new L.Point(a,c),new L.Point(b,d),e)},luminosityPalette:function(a,b,c,d,e){return new L.HSLLuminosityFunction(new L.Point(a,c),new L.Point(b,d),e)},saturationPalette:function(a,b,c,d,e){return new L.HSLSaturationFunction(new L.Point(a,c),new L.Point(b,d),e)},rgbBlendPalette:function(a,b,c,d,e){return new L.RGBColorBlendFunction(a,b,c,d,e)},hslBlendPalette:function(a,b,c,d,e){return new L.HSLColorBlendFunction(a,b,c,d,e)},customColorPalette:function(a,b,c,d){return new L.CustomColorFunction(a,b,c,d)}},L.DynamicColorPalettes={rainbow:{text:"Rainbow",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,0,300,c)}},greentored:{text:"Green - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,120,0,c)}},yellowtored:{text:"Yellow - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,60,0,c)}},orangetored:{text:"Orange - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,30,0,c)}},redtopurple:{text:"Red - Purple",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,360,270,c)}},bluetored:{text:"Blue - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,210,360,c)}},bluetored2:{text:"Blue - Red 2",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,180,0,c)}},whitetored:{text:"White - Red",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:0}))}},whitetoorange:{text:"White - Orange",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:30}))}},whitetoyellow:{text:"White - Yellow",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:60}))}},whitetogreen:{text:"White - Green",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:120}))}},whitetoltblue:{text:"White - Lt. Blue",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:180}))}},whitetoblue:{text:"White - Blue",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:240}))}},whitetopurple:{text:"White - Purple",getPalette:function(a,b){return L.Palettes.luminosityPalette(a,b,1,.5,L.Util.extend(option,{outputHue:270}))}},graytored:{text:"Gray - Red",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:0}))}},graytoorange:{text:"Gray - Orange",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:30}))}},graytoyellow:{text:"Gray - Yellow",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:60}))}},graytogreen:{text:"Gray - Green",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:120}))}},graytoltblue:{text:"Gray - Lt. Blue",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:180}))}},graytoblue:{text:"Gray - Blue",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:240}))}},graytopurple:{text:"Gray - Purple",getPalette:function(a,b){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:270}))}}},L.DynamicPaletteElement=L.Class.extend({initialize:function(a,b){this._key=a,this._dynamicPalette=b},generate:function(a){var b=L.DomUtil.create("div","palette"),c=a.count,d=this._dynamicPalette.getPalette(0,c-1),e=a.width,f=!0;a.showText&&(f=a.showText),b.setAttribute("data-palette-key",this._key),this._dynamicPalette.text&&f&&(L.DomUtil.create("div","palette-text",b).innerHTML='<i class="icon-ok hidden"></i>'+this._dynamicPalette.text);var g=e/c;a.className&&L.DomUtil.addClass(b,a.className);for(var h=0;c>h;++h){var i=L.DomUtil.create("i","palette-element");for(var j in d){var k=d[j],l=k.evaluate?k.evaluate(h):k;L.StyleConverter.setCSSProperty(i,j,l)}i.style.width=g+"px",b.appendChild(i)}return b}}),L.Path.XLINK_NS="http://www.w3.org/1999/xlink";var DomUtilFunctions=DomUtilFunctions||{setStyle:function(a,b){var c="";for(var d in b)c+=d+": "+b[d]+";";return a.setAttribute("style",c),a},setAttr:function(a,b){for(var c in b)a.setAttribute(c,b[c]);return a}};L.extend(L.DomUtil,DomUtilFunctions);var TextFunctions=TextFunctions||{__addPath:L.SVG.prototype._addPath,_addPath:function(a){TextFunctions.__addPath.call(this,a),a.options.text&&this._createText(a)},__removePath:L.SVG.prototype._removePath,_removePath:function(a){this.__removePath.call(this,a),a._text&&L.DomUtil.remove(a._text),a._pathDef&&L.DomUtil.remove(a._pathDef)},__updatePath:L.SVG.prototype._updatePath,_updatePath:function(a){this.__updatePath.call(this,a),a.options.text&&this._createText(a)},__setPath:L.SVG.prototype._setPath,_setPath:function(a,b){this.__setPath.call(this,a,b),a.options.text&&this._createText(a)},_initText:function(a){a.options.text&&this._createText(a)},getTextAnchor:function(a){return a._point?a._point:void 0},setTextAnchor:function(a,b){a._text&&(a._text.setAttribute("x",b.x),a._text.setAttribute("y",b.y))},_createText:function(a){var b=a.options.text||{};a._text&&(L.DomUtil.remove(a._text),a.text=null),a._pathDef&&(L.DomUtil.remove(a._pathDef),a._pathDef=null),a._text=L.SVG.create("text"),a._text.setAttribute("id",L.stamp(a._text));var c=document.createTextNode(b.text);if(b.path&&a._path){var d=b.path,e=L.SVG.create("path"),f=a._path.getAttribute("d");e.setAttribute("id",L.stamp(e)),f&&e.setAttribute("d",f),this._createDefs(),this._defs.appendChild(e),a._pathDef=e;var g=L.SVG.create("textPath");d.startOffset&&g.setAttribute("startOffset",d.startOffset),d.attr&&L.DomUtil.setAttr(g,d.attr),d.style&&L.DomUtil.setStyle(g,d.style),g.setAttributeNS(L.Path.XLINK_NS,"xlink:href","#"+L.stamp(e)),g.appendChild(c),a._text.appendChild(g)}else{a._text.appendChild(c),a._project();var h=a.getTextAnchor?a.getTextAnchor():this.getTextAnchor(a);this.setTextAnchor(a,h)}if(b.className?a._text.setAttribute("class",b.className):a._text.setAttribute("class","leaflet-svg-text"),b.attr&&L.DomUtil.setAttr(a._text,b.attr),b.style&&L.DomUtil.setStyle(a._text,b.style),a._path){var i=a._path.nextSibling;this._container.firstChild.insertBefore(a._text,i)}}},PathFunctions=PathFunctions||{__updateStyle:L.SVG.prototype._updateStyle,_finishPathAnimation:function(a,b){return function(){var c=a.options.dashArray||[0,0];a._path.style.strokeDasharray=c.join(" "),a._path.style.strokeDashoffset=0,b&&b(a)}},animatePath:function(a){var b=a._path,c=b.getTotalLength(),d=a.options.animatePath!==!0?L.extend({},a.options.animatePath):{},e=d.property||"stroke-dashoffset",f=d.duration||"2s",g=d.timingFunction||"ease-in-out",h=[e,f,g].join(" ");b.style.transition=b.style.MozTransition="none",b.style.transition=b.style.WebkitTransition="none",b.style.transition=b.style.MsTransition="none",b.style.strokeDasharray=c+" "+c,b.style.strokeDashoffset=c,b.getBoundingClientRect(),b.style.transition=b.style.MozTransition=h,b.style.transition=b.style.WebkitTransition=h,b.style.transition=b.style.MsTransition=h,b.style.strokeDashoffset="0",L.DomEvent.on(b,{transitionEnd:this._finishPathAnimation(a,d.animationEnd),mozTransitionEnd:this._finishPathAnimation(a,d.animationEnd),msTransitionEnd:this._finishPathAnimation(a,d.animationEnd),webkitTransitionEnd:this._finishPathAnimation(a,d.animationEnd),oTransitionEnd:this._finishPathAnimation(a,d.animationEnd)})},_createDefs:function(){this._defs||(this._defs=L.SVG.create("defs"),this._container.appendChild(this._defs))},_addPath:function(a){TextFunctions._addPath.call(this,a),a._gradient&&this._defs.appendChild(a._gradient),a._dropShadow&&this._defs.appendChild(a._dropShadow),a._fillPattern&&this._defs.appendChild(a._fillPattern),a._shapePattern&&this._defs.appendChild(a._shapePattern),a._shape&&a._path&&this._container.firstChild.insertBefore(a._shape,a._path.nextSibling),a._pathDef&&this._defs.appendChild(a._pathDef),a.options.animatePath&&this.animatePath(a)},_updatePath:function(a){TextFunctions._updatePath.call(this,a);var b=this;if(a.options.wordCloud){var c=a.options.wordCloud;c.words.length>0&&setTimeout(function(){b._createWordCloudPattern(a)},0)}},_removePath:function(a){TextFunctions._removePath.call(this,a),a._gradient&&L.DomUtil.remove(a._gradient),a._dropShadow&&L.DomUtil.remove(a._dropShadow),a._fillPattern&&L.DomUtil.remove(a._fillPattern),a._shapePattern&&L.DomUtil.remove(a._shapePattern),a._shape&&L.DomUtil.remove(a._shape),a._g&&L.DomUtil.remove(a._g)},_createMarker:function(a,b,c){this._defs||this._createDefs(),a._markers=a._markers||{},a._markerPath=a._markerPath||{},a._markers[b]||(a._markers[b]=L.SVG.create("marker"),this._defs.appendChild(a._markers[b]));var d=L.Util.guid(),e=c.exaggeration||2,f=2*e;a._markers[b].setAttribute("id",d),a._markers[b].setAttribute("markerWidth",f),a._markers[b].setAttribute("markerHeight",f),a._markers[b].setAttribute("refX",e),a._markers[b].setAttribute("refY",e),a._markers[b].setAttribute("orient","auto"),a._markers[b].setAttribute("markerUnits","strokeWidth"),a._markerPath[b]||(a._markerPath[b]=L.SVG.create("path"),a._markers[b].appendChild(a._markerPath[b])),c.reverse?a._markerPath[b].setAttribute("d","M0,"+e+" L"+f+","+f+" L"+f+",0 L0,"+e):a._markerPath[b].setAttribute("d","M"+f+","+e+" L0,"+f+" L0,0 L"+f+","+e),a._markerPath[b].setAttribute("style","fill: "+a.options.color+"; opacity: "+a.options.opacity)},_createGradient:function(a){this._defs||this._createDefs();var b,c,d=a.options.gradient!==!0?L.extend({},a.options.gradient):{},e=d.gradientType||"linear";if(b=a._gradient||L.SVG.create(e+"Gradient"),"radial"===e)c=d.radial||{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};else{var f=d.vector||[["0%","0%"],["100%","100%"]];c={x1:f[0][0],x2:f[1][0],y1:f[0][1],y2:f[1][1]}}c.id=b.id||L.stamp(b),d.gradientUnits&&b.setAttribute("gradientUnits",d.gradientUnits);var g,h=d.stops||[{offset:"0%",style:{color:"rgb(255, 255, 255)",opacity:1}},{offset:"60%",style:{color:a.options.fillColor||a.options.color,opacity:1}}];for(g in c)b.setAttribute(g,c[g]);for(var i=b.childNodes,j=i?i.length:0,k=0,l=h.length;l>k;++k){var m=h[k],n=j>k?i[k]:L.SVG.create("stop");m.style=m.style||{};for(g in m){var o=m[g];if("style"===g){var p="";o.color=o.color||a.options.fillColor||a.options.color,o.opacity="undefined"==typeof o.opacity?1:o.opacity;for(var q in o)p+="stop-"+q+":"+o[q]+";";o=p}n.setAttribute(g,o)}k>=j&&b.appendChild(n)}return a._gradient=b,c.id},_createDropShadow:function(a){this._createDefs();var b=a._dropShadow||L.SVG.create("filter"),c=b.querySelector("feOffset")||L.SVG.create("feOffset"),d=b.querySelector("feGaussianBlur")||L.SVG.create("feGaussianBlur"),e=b.querySelector("feBlend")||L.SVG.create("feBlend"),f=a.options.dropShadow&&"object"==typeof a.options.dropShadow&&Object.keys(a.options.dropShadow).length>0?a.options.dropShadow:{width:"200%",height:"200%"};f.id=L.stamp(b);for(var g in f)b.setAttribute(g,f[g]);var h={result:"offOut","in":"SourceAlpha",dx:"2",dy:"2"},i={result:"blurOut","in":"offOut",stdDeviation:"2"},j={"in":"SourceGraphic",in2:"blurOut",mode:"lighten"};for(g in h)c.setAttribute(g,h[g]);for(g in i)d.setAttribute(g,i[g]);for(g in j)e.setAttribute(g,j[g]);return b.id=f.id,a._dropShadow||(b.appendChild(c),b.appendChild(d),b.appendChild(e)),a._dropShadow=b,L.stamp(b)},_createCustomElement:function(a,b){var c=L.SVG.create(a);c.setAttribute("id",L.stamp(c));for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c},_createImage:function(a){var b=L.SVG.create("image");return b.setAttribute("id",L.stamp(b)),b.setAttribute("width",a.width),b.setAttribute("height",a.height),b.setAttribute("x",a.x||0),b.setAttribute("y",a.y||0),b.setAttribute("preserveAspectRatio",a.preserveAspectRatio||"xMidYMid meet"),b.setAttributeNS(L.Path.XLINK_NS,"xlink:href",a.url),b},_createPattern:function(a){var b=L.SVG.create("pattern");return b.setAttribute("id",L.stamp(b)),b.setAttribute("width",a.width),b.setAttribute("height",a.height),b.setAttribute("x",a.x||0),b.setAttribute("y",a.y||0),b.setAttribute("patternUnits",a.patternUnits||"objectBoundingBox"),b},_createShape:function(a,b){var c=this._createCustomElement(a,b);return c},_createFillPattern:function(a){this._createDefs();var b=L.extend({},a.options.fillPattern),c=this._createPattern(b.pattern),d=L.extend({url:b.url},b.image),e=this._createImage(d);return c.appendChild(e),a._fillPattern&&L.DomUtil.remove(a._fillPattern),a._fillPattern=c,L.stamp(c)},_getDefaultDiameter:function(a){return 1.75*a},_createShapeImage:function(a){this._createDefs();var b=a.options.shapeImage||{},c=a.options.radius||Math.max(a.options.radiusX,a.options.radiusY),d=a._getDefaultDiameter?a._getDefaultDiameter(c):this._getDefaultDiameter(c),e=b.imageSize||new L.Point(d,d),f=b.radius||d/2,g=b.shape||{circle:{r:f,cx:0,cy:0}},h=b.pattern||{width:e.x,height:e.y,x:0,y:0};h.patternUnits=h.patternUnits||"objectBoundingBox";var i=this._createPattern(h);L.stamp(i);var j=Object.keys(g),k=j.length>0?j[0]:"circle";g[k].fill="url(#"+L.stamp(i)+")";var l=this._createShape(k,g[k]);a.options.interactive&&l.setAttribute("class","leaflet-interactive"),b=b.image||{width:e.x,height:e.y,x:0,y:0,url:a.options.imageCircleUrl};var m=this._createImage(b);return m.setAttributeNS(L.Path.XLINK_NS,"xlink:href",b.url),i.appendChild(m),a._shapePattern&&L.DomUtil.remove(a._shapePattern),a._shape&&L.DomUtil.remove(a._shape),a._shapePattern=i,a._shape=l,L.stamp(i)},_updateStyle:function(a){this.__updateStyle.call(this,a);var b;if(a._path){if(a.options.text&&a._renderer._createText(a),a.options.markers)for(var c in a.options.markers)a.options.markers.hasOwnProperty(c)&&(this._createMarker(a,c,a.options.markers[c]),a._path.setAttribute("marker-"+c,"url(#"+a._markers[c].getAttribute("id")+")"));
a.options.gradient?(b=this._createGradient(a),a.options.stroke&&!a.options.fill?a._path.setAttribute("stroke","url(#"+b+")"):a._path.setAttribute("fill","url(#"+b+")")):a.options.fill||a._path.setAttribute("fill","none"),a.options.dropShadow?(b=this._createDropShadow(a),a._path.setAttribute("filter","url(#"+b+")")):a._path.removeAttribute("filter"),a.options.fillPattern&&(b=this._createFillPattern(a),a._path.setAttribute("fill","url(#"+b+")"))}if(a._applyCustomStyles&&a._applyCustomStyles(),a._gradient&&this._defs.appendChild(a._gradient),a._dropShadow&&this._defs.appendChild(a._dropShadow),a._fillPattern&&this._defs.appendChild(a._fillPattern),a._shapePattern&&this._defs.appendChild(a._shapePattern),a._shape&&a._path&&this._container.firstChild.insertBefore(a._shape,a._path.nextSibling),a.options.wordCloud){var d=a.options.wordCloud,e=this;d.words.length>0&&setTimeout(function(){e._createWordCloudPattern(a)},0)}},_createWordCloudPattern:function(a){var b=a.options.wordCloud||{},c="",d=b.patternOptions||{};this._defs||this._createDefs(),b.textField=b.textField||"key",b.countField=b.countField||"doc_count";for(var e=0,f=b.words.length;f>e;++e){var g=b.words[e];c+=g[b.textField]+"_"+g[b.countField]}if(c!==a._wordCloudGuid&&a._path){a._wordCloudGuid=c;var h=L.SVG.create("path");h.setAttribute("d",a._path.getAttribute("d")),h.setAttribute("id",c),d.id=c,d.patternUnits=d.patternUnits||"userSpaceOnUse";var i=a.getBounds(),j=new L.Bounds(this._map.project(i.getNorthWest()),this._map.project(i.getSouthEast())),k=j.getSize().x/j.getSize().y;d.width=d.width||500,d.height=d.height||500*k||500,d.width=Math.min(d.width,d.height),d.height=d.width,a._wordCloud=L.SVG.create("g"),a._wordPattern=this._createPattern(d),a._wordPattern.id=c,a._wordPattern.appendChild(a._wordCloud),this._defs.appendChild(a._wordPattern),this._createWordCloud(a,a._wordCloud,b)}if(a._path){var l=a._path.getAttribute("fill");-1===l.indexOf(a._wordCloudGuid)&&a._path.setAttribute("fill","url(#"+a._wordCloudGuid+")")}},_createWordCloud:function(a,b,c){var d=c.patternOptions.width,e=c.patternOptions.height,f=c.words,g=(this.getTextAnchor(a),L.SVG.create("rect")),h=c.countField,i=c.textField,j=c.rotation||function(){return 0};g.setAttribute("width",d),g.setAttribute("height",e),g.style.fill=a.options.fillColor||"#000",g.setAttribute("transform","translate("+-d/2+","+-e/2+")"),b.appendChild(g);var k=function(a,b){return function(a){"svg"+L.Util.guid();d3.select(b).attr("transform","translate("+d/2+","+e/2+")").selectAll("text").data(a).enter().append("text").style("font-size",function(a){return a.size+"px"}).style("font-family",c.fontFamily||"Impact").style("fill",function(a,b){return l(b)}).attr("text-anchor","middle").attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"}).text(function(a){return a[i]})}},l=c.textFillColor||d3.scale.category20(),m=d3.scale.linear(),n=f[0][h],o=f[f.length-1][h],p=c.fontSize||d3.scale.log().domain([o,n]).range([10,40]);return m.domain([0,10]).range([-60,60]),d3.layout.cloud().size([d,e]).spiral("rectangular").timeInterval(1/0).words(f).padding(5).rotate(j).font(c.fontFamily||"Impact").fontSize(function(a){return p(a[h])}).on("end",k(f,b)).start(),b}},PolylineFunctions={_getCenter:L.Polyline.prototype.getCenter,getCenter:function(){var a=this._getCenter.call(this);return a||(a=this._latlngs[0]),a},_buildDistanceIndex:function(){if(!this._index){var a=this._latlngs,b=0;this._index=[0];for(var c=0,d=a.length;d-1>c;++c)b+=a[c].distanceTo(a[c+1]),this._index.push(b);this._totalDistance=b}return this},_clearDistanceIndex:function(){return this._totalDistance=0,this._index=null,this},_distanceToPoints:function(a,b){var c=null;if(b>=this._totalDistance)c=[a[a.length-1],a[a.length-1]];else for(var d=0,e=this._index.length;e-1>d;++d)if(b>=this._index[d]&&b<this._index[d+1]){c=[a[d],a[d+1]];break}return c},_getInterpolator:function(a){return new L.LinearFunction([a[0].lng,a[0].lat],[a[1].lng,a[1].lat])},animateLine:function(a){var b=function(a){return function(b,c,d){var e=a.indexOf(c[0]);b.setLatLngs(a.slice(0,e+1).concat(new L.LatLng(d.y,d.x)))}};L.AnimationUtils.animateLine(this,L.extend({},{update:b(this._latlngs.slice())},a))}};L.extend(L.Polyline.prototype,PolylineFunctions),L.Polyline.prototype.getTextAnchor=function(){var a=this.getCenter();return this._map.latLngToLayerPoint(a)},L.extend(L.SVG.prototype,TextFunctions,PathFunctions),L.Point.prototype.rotate=function(a,b){var c=this.distanceTo(b),d=a*L.LatLng.DEG_TO_RAD+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(d),this.y=b.y+c*Math.sin(d)},L.extend(L.GeoJSON,{asFeature:function(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var LineTextFunctions=L.extend({},TextFunctions);LineTextFunctions.getCenter=function(){var a,b,c,d,e,f,g=this._latlngs,h=g.length;for(a=0,b=h-1,area=0,lat=0,lng=0;h>a;b=a++)c=g[a],d=g[b],e=c.lat*d.lng-d.lat*c.lng,lat+=(c.lat+d.lat)*e,lng+=(c.lng+d.lng)*e,area+=e/2;return f=area?new L.LatLng(lat/(6*area),lng/(6*area)):g[0],f.area=area,f},L.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),L.Point.prototype.rotate=function(a,b){var c=this.distanceTo(b),d=a*L.LatLng.DEG_TO_RAD+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(d),this.y=b.y+c*Math.sin(d)},L.RegularPolygonMarker=L.Path.extend({initialize:function(a,b){L.setOptions(this,b),this._latlng=a,this.options.numberOfSides=Math.max(this.options.numberOfSides,3)},options:{fill:!0,radiusX:10,radiusY:10,rotation:0,numberOfSides:3,position:{x:0,y:0},maxDegrees:360,gradient:!0,dropShadow:!1,interactive:!0},setLatLng:function(a){return this._latlng=a,this.redraw()},projectLatLngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._points=this._getPoints(this._point,!1,this.options),(this.options.innerRadius||this.options.innerRadiusX&&this.options.innerRadiusY)&&(this._innerPoints=this._getPoints(this._point,!0,this.options).reverse())},_project:function(){this.projectLatLngs(),this._updateBounds()},_updateBounds:function(){var a=this._map,b=this.options.radius||this.options.radiusX,c=this.options.radius||this.options.radiusY,d=b*Math.cos(Math.PI/4),e=c*Math.sin(Math.PI/4),f=a.project(this._latlng),g=new L.Point(f.x-d,f.y+e),h=new L.Point(f.x+d,f.y-e);this._pxBounds=new L.Bounds(g,h)},_update:function(){this._map&&this._renderer._setPath(this,this.getPathString())},getBounds:function(){var a=this._map,b=this.options.radius||this.options.radiusX,c=this.options.radius||this.options.radiusY,d=b*Math.cos(Math.PI/4),e=c*Math.sin(Math.PI/4),f=a.project(this._latlng),g=new L.Point(f.x-d,f.y+e),h=new L.Point(f.x+d,f.y-e),i=a.unproject(g),j=a.unproject(h);return new L.LatLngBounds(i,j)},setRadius:function(a){return this.options.radius=a,this.redraw()},setRadiusXY:function(a,b){return this.options.radius=null,this.options.radiusX=a,this.options.radiusY=b,this.redraw()},setInnerRadius:function(a){return this.options.innerRadius=a,this.redraw()},setInnerRadiusXY:function(a,b){return this.options.innerRadius=null,this.options.innerRadiusX=a,this.options.innerRadiusY=b,this.redraw()},setRotation:function(a){return this.options.rotation=a,this.redraw()},setNumberOfSides:function(a){return this.options.numberOfSides=a,this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){var a=this.getTextAnchor();if(this._shape)if("circle"===this._shape.tagName||"ellipse"===this._shape.tagName)this._shape.setAttribute("cx",a.x),this._shape.setAttribute("cy",a.y);else{var b=this._shape.getAttribute("width"),c=this._shape.getAttribute("height");this._shape.setAttribute("x",a.x-Number(b)/2),this._shape.setAttribute("y",a.y-Number(c)/2)}return this._path&&this._path.setAttribute("shape-rendering","geometricPrecision"),new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},getTextAnchor:function(){return this._point},_getPoints:function(a,b,c){for(var d,e,f=c.maxDegrees||360,g=f/Math.max(c.numberOfSides,3),h=f,i=0,j=[],k=b?c.innerRadius||c.innerRadiusX:c.radius||c.radiusX,l=b?c.innerRadius||c.innerRadiusY:c.radius||c.radiusY,m=function(a){return a*L.LatLng.DEG_TO_RAD};h>i;)e=m(i),d=this._getPoint(a,e,k,l,c),j.push(d),i+=g;return j},_getPoint:function(a,b,c,d,e){var f=e.position?a.add(new L.Point(e.position.x,e.position.y)):a,g=new L.Point(f.x+c*Math.cos(b),f.y+d*Math.sin(b));return g.rotate(e.rotation,f),g},_getDefaultDiameter:function(a){var b=Math.PI/this.options.numberOfSides,c=a*Math.cos(b);return 1.75*c},_applyCustomStyles:function(){(this.options.shapeImage||this.options.imageCircleUrl)&&this._renderer._createShapeImage(this)},toGeoJSON:function(){var a=L.Marker.prototype.toGeoJSON.call(this);return a.properties=this.options,a}}),L.StarMarker=L.RegularPolygonMarker.extend({options:{numberOfPoints:5,rotation:-15,maxDegrees:360,gradient:!0,dropShadow:!0},setNumberOfPoints:function(a){return this.options.numberOfPoints=a,this.redraw()},_getPoints:function(a,b,c){for(var d,e,f,g=c.maxDegrees||360,h=g/c.numberOfPoints,i=g,j=0,k=[],l=b?c.innerRadius||c.innerRadiusX:c.radius||c.radiusX,m=b?c.innerRadius||c.innerRadiusY:c.radius||c.radiusY,n=function(a){return a*L.LatLng.DEG_TO_RAD};i>j;)f=n(j),d=this._getPoint(a,f,l,m,c),e=this._getPoint(a,f+n(h)/2,l/2,m/2,c),k.push(d),k.push(e),j+=h;return k}}),L.starMarker=function(a,b){return new L.StarMarker(a,b)},L.TriangleMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:3,rotation:30,radius:5}}),L.triangleMarker=function(a,b){return new L.TriangleMarker(a,b)},L.DiamondMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,radiusX:5,radiusY:10}}),L.diamondMarker=function(a,b){return new L.DiamondMarker(a,b)},L.SquareMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,rotation:45,radius:5}}),L.squareMarker=function(a,b){return new L.SquareMarker(a,b)},L.PentagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:5,rotation:-18,radius:5}}),L.pentagonMarker=function(a,b){return new L.PentagonMarker(a,b)},L.HexagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:6,rotation:30,radius:5}}),L.hexagonMarker=function(a,b){return new L.HexagonMarker(a,b)},L.OctagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:8,rotation:22.5,radius:5}}),L.octagonMarker=function(a,b){return new L.OctagonMarker(a,b)},L.MapMarker=L.Path.extend({initialize:function(a,b){L.setOptions(this,b),this._latlng=a},options:{fill:!0,fillOpacity:1,opacity:1,radius:15,innerRadius:5,position:{x:0,y:0},rotation:0,numberOfSides:50,color:"#000000",fillColor:"#0000FF",weight:1,gradient:!0,dropShadow:!0,interactive:!0},setLatLng:function(a){return this._latlng=a,this.redraw()},projectLatLngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._points=this._getPoints(this._point,!1,this.options),this.options.innerRadius>0&&(this._innerPoints=this._getPoints(this._point,!0,this.options).reverse())},_project:function(){this.projectLatLngs(),this._updateBounds()},_updateBounds:function(){var a=this._map,b=3*this.options.radius,c=a.project(this._latlng),d=new L.Point(c.x-this.options.radius,c.y),e=new L.Point(c.x+this.options.radius,c.y-b);this._pxBounds=new L.Bounds(d,e)},_update:function(){this._map&&this._renderer._setPath(this,this.getPathString())},getBounds:function(){var a=this._map,b=3*this.options.radius,c=a.project(this._latlng),d=new L.Point(c.x-this.options.radius,c.y),e=new L.Point(c.x+this.options.radius,c.y-b),f=a.unproject(d),g=a.unproject(e);return new L.LatLngBounds(f,g)},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=a,this.redraw()},setInnerRadius:function(a){return this.options.innerRadius=a,this.redraw()},setRotation:function(a){return this.options.rotation=a,this.redraw()},setNumberOfSides:function(a){return this.options.numberOfSides=a,this.redraw()},getPathString:function(){var a=this.getTextAnchor();if(this._shape)if("circle"===this._shape.tagName||"ellipse"===this._shape.tagName)this._shape.setAttribute("cx",a.x),this._shape.setAttribute("cy",a.y);else{var b=this._shape.getAttribute("width"),c=this._shape.getAttribute("height");this._shape.setAttribute("x",a.x-Number(b)/2),this._shape.setAttribute("y",a.y-Number(c)/2)}return this._path&&this._path.setAttribute("shape-rendering","geometricPrecision"),new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},getTextAnchor:function(){var a=this.options.position?this._point.add(new L.Point(this.options.position.x,this.options.position.y)):this._point;return new L.Point(a.x,a.y-2*this.options.radius)},_getPoints:function(a,b,c){var d,e,f=b?360:210,g=b?f/Math.max(c.numberOfSides,3):f/50,h=b?f+c.rotation:f,i=b?c.rotation:-30,j=[],k=c.radius,l=Math.sqrt(.75),m=function(a){return a*L.LatLng.DEG_TO_RAD},n=c.position?a.add(new L.Point(c.position.x,c.position.y)):a;for(b||(j.push(n),j.push(new L.Point(n.x+l*k,n.y-1.5*k)));h>i;)e=m(i),d=this._getPoint(n,e,k,b,c),j.push(d),i+=g;return b||j.push(new L.Point(n.x-l*k,n.y-1.5*k)),j},_getPoint:function(a,b,c,d,e){var f=c;return c=d?e.innerRadius:c,new L.Point(a.x+c*Math.cos(b),a.y-2*f-c*Math.sin(b))},_applyCustomStyles:function(){(this.options.shapeImage||this.options.imageCircleUrl)&&this._renderer._createShapeImage(this)}}),L.mapMarker=function(){return new L.MapMarker(latlng,options)},L.SVGMarker=L.Path.extend({initialize:function(a,b){L.setOptions(this,b),this._svg=b.svg||'<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"/>',0===this._svg.indexOf("<")&&(this._data=(new DOMParser).parseFromString(this._svg,"text/xml")),this._latlng=a},projectLatLngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_project:function(){this.projectLatLngs(),this._updateBounds()},_updateBounds:function(){var a=this._map,b=200,c=200,d=b*Math.cos(Math.PI/4),e=c*Math.sin(Math.PI/4),f=a.project(this._latlng),g=new L.Point(f.x-d,f.y+e),h=new L.Point(f.x+d,f.y-e);this._pxBounds=new L.Bounds(g,h)},_update:function(){this._map&&this._path&&this.updateSVG()},setLatLng:function(a){this._latlng=a,this.redraw()},getLatLng:function(){return this._latlng},onAdd:function(){var a=this;if(this._renderer=this._map.getRenderer(this),this._data)a._reset(),a.addSVG(),a.updateSVG();else{var b=new XMLHttpRequest;b.onreadystatechange=function(){4===this.readyState&&200===this.status&&(a._data=this.responseXML,a._reset(),a.addSVG(),a.updateSVG())},b.open("GET",this._svg,!0),b.send(null)}},addSVG:function(){var a=this,b=a._data;if(a._svgEl="svg"===b.nodeName.toLowerCase()?b.cloneNode(!0):b.querySelector("svg").cloneNode(!0),!a._g){var c=L.SVG.create("g");if(a._g=c,a._g.id=L.stamp(a._g),a._svgEl.id=L.stamp(a._svgEl),a._g.appendChild(a._svgEl),a._path=a._g,a._renderer._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path),a.options.interactive){L.DomUtil.addClass(a._g,"leaflet-interactive");var d=function(a){var b=a.childNodes;if(a.id&&(a.id=L.stamp(a)),b)for(var c=0,e=b.length;e>c;++c)d(b[c])};d(a._svgEl)}}},updateSVG:function(){var a=this,b=a.options||{};a._g.setAttribute("pointer-events",b.pointerEvents||(b.interactive?"visiblePainted":"none")),b.setStyle&&b.setStyle.call(a,a._svgEl);var c=a._svgEl.getAttribute("width"),d=a._svgEl.getAttribute("height"),e=c?c.replace("px",""):"100%",f=d?d.replace("px",""):"100%";"100%"===e&&(e=b.size.x,f=b.size.y,a._svgEl.setAttribute("width",e+(-1!==String(e).indexOf("%")?"":"px")),a._svgEl.setAttribute("height",f+(-1!==String(f).indexOf("%")?"":"px")));var g=b.size||new L.Point(e,f),h=new L.Point(g.x/e,g.y/f),i=[],j=b.anchor||new L.Point(-g.x/2,-g.y/2),k=a._point.x+j.x,l=a._point.y+j.y;i.push("translate("+k+" "+l+")"),i.push("scale("+h.x+" "+h.y+")"),a.options.rotation&&i.push("rotate("+b.rotation+" "+e/2+" "+f/2+")"),a._g.setAttribute("transform",i.join(" "))},getElement:function(){return me._g},redraw:function(){return this._map&&this._path&&this._renderer._updatePath(this),this},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}}),L.svgMarker=function(a,b){return new L.SVGMarker(a,b)},L.MarkerGroup=L.FeatureGroup.extend({initialize:function(a,b){L.FeatureGroup.prototype.initialize.call(this,b),this.setLatLng(a)},setStyle:function(){return this},setLatLng:function(a){return this._latlng=a,this.eachLayer(function(b){b.setLatLng&&b.setLatLng(a)}),this},getLatLng:function(){return this._latlng},toGeoJSON:function(){var a={type:"FeatureCollection",features:[]},b=function(a){return function(b){a.features.push(L.Util.pointToGeoJSON.call(b))}};return this.eachLayer(b(a)),a}}),L.markerGroup=function(a,b){return new L.MarkerGroup(a,b)},L.BarMarker=L.Path.extend({initialize:function(a,b){L.setOptions(this,b),this._latlng=a},options:{fill:!0,width:2,maxHeight:10,position:{x:0,y:0},weight:1,color:"#000",opacity:1,gradient:!0,dropShadow:!1,lineCap:"square",lineJoin:"miter"},setLatLng:function(a){return this._latlng=a,this.redraw()},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._points=this._getPoints()},_update:function(){this._map&&this._map&&this._renderer._setPath(this,this.getPathString())},getBounds:function(){var a=this._map,b=a.project(this._latlng),c=this.options.width/2,d=new L.Point(b.x-c,b.y),e=new L.Point(b.x+c,b.y-this.options.maxHeight),f=a.unproject(d),g=a.unproject(e);return new L.LatLngBounds(f,g)},getLatLng:function(){return this._latlng},getPathString:function(){return this._path.setAttribute("shape-rendering","crispEdges"),new L.SVGPathBuilder(this._points).build()},_getPoints:function(){var a,b,c,d,e=[],f=this._point.x+this.options.position.x,g=this._point.y+this.options.position.y,h=this.options.width/2,i=this.options.value/this.options.maxValue*this.options.maxHeight;return a=new L.Point(f+h,g),b=new L.Point(f+h,g-i),c=new L.Point(f-h,g-i),d=new L.Point(f-h,g),e=[a,b,c,d]}}),L.barMarker=function(a,b){return new L.BarMarker(a,b)},L.ChartMarker=L.FeatureGroup.extend({initialize:function(a,b){L.Util.setOptions(this,b),this._layers={},this._latlng=a,this._loadComponents()},setLatLng:function(a){return this._latlng=a,this.redraw()},getLatLng:function(){return this._latlng},_loadComponents:function(){},_highlight:function(a){return a.weight&&(a.weight*=2),a},_unhighlight:function(a){return a.weight&&(a.weight/=2),a},_bindMouseEvents:function(a){var b=this,c=this.options.tooltipOptions;a.on("mouseover",function(a){var d,e=this.options,f=e.key,g=e.value,h=a.layerPoint,i=h.x-this._point.x,j=h.y-this._point.y,k=e.iconSize,l=i,m=j,n=5;k&&(l=0>i?k.x-i+n:-i-n,m=0>j?k.y-j+n:-j-n,d=new L.Point(l,m));var o={},p=e.displayText?e.displayText(g):g;o[f]={name:e.displayName,value:p};var q=new L.LegendIcon(o,e,{className:"leaflet-div-icon",iconSize:c?c.iconSize:k,iconAnchor:d||new L.Point(-5,0)});e.marker=new L.Marker(b._latlng,{icon:q}),e=b._highlight(e),this.initialize(b._latlng,e),this.redraw(),this.setStyle(e),b.addLayer(e.marker)}),a.on("mouseout",function(){var a=this.options;a=b._unhighlight(a),this.initialize(b._latlng,a),this.redraw(),this.setStyle(a),b.removeLayer(a.marker)})},bindPopup:function(a,b){this.eachLayer(function(c){c.bindPopup(a,b)})},openPopup:function(a){for(var b in this._layers){var c=this._layers[b];a=a||this._latlng,c.openPopup(a);break}},closePopup:function(){for(var a in this._layers){var b=this._layers[a];latlng=latlng||this._latlng,b.closePopup();break}},redraw:function(){this.clearLayers(),this._loadComponents()},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}}),L.BarChartMarker=L.ChartMarker.extend({initialize:function(a,b){L.setOptions(this,b),L.ChartMarker.prototype.initialize.call(this,a,b)},options:{weight:1,opacity:1,color:"#000",fill:!0,position:{x:0,y:0},width:10,offset:0,iconSize:new L.Point(50,40)},_loadComponents:function(){var a,b,c,d,e,f,g,h=this.options,i=Object.keys(this.options.data),j=i.length,k=this.options.width,l=this.options.offset||0,m=this.options.data,n=this.options.chartOptions;e=-(k*j+l*(j-1))/2+k/2,f=0;for(var o in m)a=m[o],g=n[o],b=g.minValue||0,c=g.maxValue||100,h.fillColor=g.fillColor||this.options.fillColor,h.value=a,h.minValue=b,h.maxValue=c,h.position={x:e,y:f},h.width=k,h.maxHeight=g.maxHeight||10,h.key=o,h.value=a,h.displayName=g.displayName,h.opacity=this.options.opacity||1,h.fillOpacity=this.options.fillOpacity||.7,h.weight=this.options.weight||1,h.color=g.color||this.options.color,h.displayText=g.displayText,d=new L.BarMarker(this._latlng,h),this._bindMouseEvents(d),this.addLayer(d),e+=k+l}}),L.RadialBarMarker=L.Path.extend({initialize:function(a,b){L.setOptions(this,b),this._latlng=a},options:{fill:!0,radius:10,rotation:0,numberOfSides:30,position:{x:0,y:0},gradient:!0,dropShadow:!1},setLatLng:function(a){return this._latlng=a,this.redraw()},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._points=this._getPoints()},_update:function(){this._map&&this._map&&this._renderer._setPath(this,this.getPathString())},getBounds:function(){var a=this._map,b=this.options.radiusX||this.options.radius,c=this.options.radiusY||this.options.radius,d=b*Math.cos(Math.PI/4),e=c*Math.sin(Math.PI/4),f=a.project(this._latlng),g=new L.Point(f.x-d,f.y+e),h=new L.Point(f.x+d,f.y-e),i=a.unproject(g),j=a.unproject(h);return new L.LatLngBounds(i,j)},getLatLng:function(){return this._latlng},getPathString:function(){var a=this.options.endAngle-this.options.startAngle,b=a>=180?"1":"0",c=this.options.radiusX||this.options.radius,d=this.options.radiusY||this.options.radius,e="M"+this._points[0].x.toFixed(2)+","+this._points[0].y.toFixed(2)+"A"+c.toFixed(2)+","+d.toFixed(2)+" 0 "+b+",1 "+this._points[1].x.toFixed(2)+","+this._points[1].y.toFixed(2)+"L";return this._innerPoints?(e=e+this._innerPoints[0].x.toFixed(2)+","+this._innerPoints[0].y.toFixed(2),e=e+"A"+(c-this.options.barThickness).toFixed(2)+","+(d-this.options.barThickness).toFixed(2)+" 0 "+b+",0 "+this._innerPoints[1].x.toFixed(2)+","+this._innerPoints[1].y.toFixed(2)+"z"):e=e+this._point.x.toFixed(2)+","+this._point.y.toFixed(2)+"z",L.Browser.vml&&(e=Core.SVG.path(e)),this._path.setAttribute("shape-rendering","geometricPrecision"),e},_getPoints:function(){var a=this.options.endAngle-this.options.startAngle,b=this.options.endAngle+this.options.rotation,c=this.options.startAngle+this.options.rotation,d=[],e="radiusX"in this.options?this.options.radiusX:this.options.radius,f="radiusY"in this.options?this.options.radiusY:this.options.radius,g=function(a){return a*L.LatLng.DEG_TO_RAD};b=b||0,360===a&&(b-=.1);var h=g(c),i=g(b);return d.push(this._getPoint(h,e,f)),d.push(this._getPoint(i,e,f)),this.options.barThickness&&(this._innerPoints=[],this._innerPoints.push(this._getPoint(i,e-this.options.barThickness,f-this.options.barThickness)),this._innerPoints.push(this._getPoint(h,e-this.options.barThickness,f-this.options.barThickness))),d},_getPoint:function(a,b,c){return new L.Point(this._point.x+this.options.position.x+b*Math.cos(a),this._point.y+this.options.position.y+c*Math.sin(a))}}),L.radialBarMarker=function(a,b){return new L.RadialBarMarker(a,b)},L.PieChartMarker=L.ChartMarker.extend({initialize:function(a,b){L.Util.setOptions(this,b),L.ChartMarker.prototype.initialize.call(this,a,b)},options:{weight:1,opacity:1,color:"#000",fill:!0,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40)},_highlight:function(a){var b=a.radiusX,c=a.radiusY,d=a.barThickness;return a.oldBarThickness=d,a.oldRadiusX=b,a.oldRadiusY=c,a.radiusX*=a.mouseOverExaggeration,a.radiusY*=a.mouseOverExaggeration,a.barThickness=a.radiusX-b+d,a},_unhighlight:function(a){return a.radiusX=a.oldRadiusX,a.radiusY=a.oldRadiusY,a.barThickness=a.oldBarThickness,a},_loadComponents:function(){var a,b,c,d,e=0,f=0,g=0,h=this.options.maxDegrees||360,i=this.options.rotation,j=this.options,k=this.options.data,l=this.options.chartOptions,m=function(a,b){var c=0;return a[b]&&(c=parseFloat(a[b])),c};for(d in k)a=m(k,d),e+=a;if(e>0)for(d in k)a=parseFloat(k[d])||0,c=l[d],g=a/e,f=g*h,j.startAngle=i,j.endAngle=i+f,j.fillColor=c.fillColor,j.color=c.color||"#000",j.radiusX=this.options.radiusX||this.options.radius,j.radiusY=this.options.radiusY||this.options.radius,j.rotation=0,j.key=d,j.value=a,j.displayName=c.displayName,j.displayText=c.displayText,b=new L.RadialBarMarker(this._latlng,j),this._bindMouseEvents(b),i=j.endAngle,this.addLayer(b)}}),L.pieChartMarker=function(a,b){return new L.PieChartMarker(a,b)},L.CoxcombChartMarker=L.PieChartMarker.extend({statics:{SIZE_MODE_RADIUS:"radius",SIZE_MODE_AREA:"area"}}),L.CoxcombChartMarker=L.CoxcombChartMarker.extend({initialize:function(a,b){L.Util.setOptions(this,b),L.PieChartMarker.prototype.initialize.call(this,a,b)},options:{weight:1,opacity:1,color:"#000",fill:!0,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40),sizeMode:L.CoxcombChartMarker.SIZE_MODE_AREA},_loadComponents:function(){var a,b,c,d,e,f=0,g=this.options.maxDegrees||360,h=this.options.rotation,i=this.options,j="radiusX"in this.options?this.options.radiusX:this.options.radius,k="radiusY"in this.options?this.options.radiusY:this.options.radius,l=Object.keys(this.options.data),m=l.length,n=this.options.data,o=this.options.chartOptions;f=g/m;var p=function(a){return Math.sqrt(m*a/Math.PI)};for(var q in n){if(a=parseFloat(n[q])||0,e=o[q],b=e.minValue||0,c=e.maxValue,this.options.sizeMode===L.CoxcombChartMarker.SIZE_MODE_RADIUS){var r=new L.LinearFunction(new L.Point(b,0),new L.Point(c,j)),s=new L.LinearFunction(new L.Point(b,0),new L.Point(c,k));i.radiusX=r.evaluate(a),i.radiusY=s.evaluate(a)}else{var t=Math.max(j,k),u=Math.PI*Math.pow(t,2)/m,v=new L.LinearFunction(new L.Point(b,0),new L.Point(c,u),{postProcess:p});i.radiusX=v.evaluate(a),i.radiusY=i.radiusX}i.startAngle=h,i.endAngle=h+f,i.fillColor=e.fillColor,i.color=e.color||"#000",i.rotation=0,i.key=q,i.value=a,i.displayName=e.displayName,i.displayText=e.displayText,d=new L.RadialBarMarker(this._latlng,i),this._bindMouseEvents(d),h=i.endAngle,this.addLayer(d)}}}),L.coxcombChartMarker=function(a,b){return new L.CoxcombChartMarker(a,b)},L.RadialBarChartMarker=L.ChartMarker.extend({initialize:function(a,b){L.Util.setOptions(this,b),L.ChartMarker.prototype.initialize.call(this,a,b)},options:{weight:1,opacity:1,color:"#000",fill:!0,radius:10,rotation:0,numberOfSides:30,offset:2,barThickness:5,maxDegrees:360,iconSize:new L.Point(50,40)},_loadComponents:function(){var a,b,c,d,e,f=this.options.rotation,g=this.options.maxDegrees||360,h=this.options,i=this.options.radiusX||this.options.radius,j=this.options.radiusY||this.options.radius,k=this.options.data,l=this.options.chartOptions,m=this.options.barThickness||4,n=this.options.offset||2;for(var o in k){a=parseFloat(k[o]),e=l[o],b=e.minValue||0,c=e.maxValue||100;var p=new L.LinearFunction(new L.Point(b,0),new L.Point(c,g));f=p.evaluate(a),h.startAngle=this.options.rotation,h.endAngle=this.options.rotation+f,h.fillColor=e.fillColor,h.radiusX=i,h.radiusY=j,h.barThickness=m,h.rotation=0,h.key=o,h.value=a,h.displayName=e.displayName,h.displayText=e.displayText,h.weight=this.options.weight||1,d=new L.RadialBarMarker(this._latlng,h),this._bindMouseEvents(d),this.addLayer(d),i+=m+n,j+=m+n}}}),L.radialBarChartMarker=function(a,b){return new L.RadialBarChartMarker(a,b)},L.StackedRegularPolygonMarker=L.ChartMarker.extend({options:{iconSize:new L.Point(50,40)},initialize:function(a,b){L.Util.setOptions(this,b),L.ChartMarker.prototype.initialize.call(this,a,b)},_loadComponents:function(){var a,b,c,d,e=0,f=0,g=this.options,h=this.options.data,i=this.options.chartOptions,j=[];for(d in h){a=parseFloat(h[d]),c=i[d],minValue=c.minValue||0,maxValue=c.maxValue||100,minRadius=c.minRadius||0,maxRadius=c.maxRadius||10,g.fillColor=c.fillColor||this.options.fillColor,g.value=a,g.minValue=minValue,g.maxValue=maxValue;var k=new L.LinearFunction(new L.Point(minValue,minRadius),new L.Point(maxValue,maxRadius)),l=k.evaluate(a);g.radiusX=e+l,g.radiusY=f+l,g.innerRadiusX=e,g.innerRadiusY=f,g.key=d,g.displayName=c.displayName,g.opacity=this.options.opacity||1,g.fillOpacity=this.options.fillOpacity||.7,g.weight=this.options.weight||1,g.color=c.color||this.options.color,g.displayText=c.displayText,b=new L.RegularPolygonMarker(this._latlng,g),this._bindMouseEvents(b),e=g.radiusX,f=g.radiusY,this.options.drawReverse?j.push(b):this.addLayer(b)}if(this.options.drawReverse)for(var m=j.pop();m;)this.addLayer(m),m=j.pop()}}),L.RadialMeterMarker=L.ChartMarker.extend({initialize:function(a,b){L.Util.setOptions(this,b),L.ChartMarker.prototype.initialize.call(this,a,b)},options:{weight:1,opacity:1,color:"#000",fill:!0,radius:10,rotation:180,numberOfSides:30,offset:2,barThickness:5,maxDegrees:180,iconSize:new L.Point(50,40),backgroundStyle:{fill:!0,fillColor:"#707070",fillOpacity:.2,opacity:.8,color:"#505050"}},_loadComponents:function(){var a,b,c,d,e,f,g=this.options.rotation,h=this.options.maxDegrees||360,i=this.options,j=this.options.radiusX||this.options.radius,k=this.options.radiusY||this.options.radius,l=this.options.data,m=this.options.chartOptions,n=this.options.barThickness||4,o=g,p=this.options.numSegments||10,q=h/p;for(var r in l){a=parseFloat(l[r]),e=m[r],f=this.options.displayOptions?this.options.displayOptions[r]:{},b=e.minValue||0,c=e.maxValue||100;for(var s,t,u=c-b,v=h/u*(a-b),w=g+v,x=g+h,y=new L.LinearFunction(new L.Point(g,b),new L.Point(x,c));w>o;){i.startAngle=o,s=Math.min(q,w-o),i.endAngle=o+s,i.fillColor=e.fillColor,i.radiusX=j,i.radiusY=k,i.barThickness=n,i.rotation=0,i.key=r,i.value=a,i.displayName=e.displayName,i.displayText=e.displayText,t=y.evaluate(o+s);for(var z in f)i[z]=f[z].evaluate?f[z].evaluate(t):f[z];d=new L.RadialBarMarker(this._latlng,i),this._bindMouseEvents(d),this.addLayer(d),o+=s}if(this.options.backgroundStyle&&x>o){s=x-o,i.endAngle=o+s,i.radiusX=j,i.radiusY=k,i.barThickness=n,i.rotation=0,i.key=r,i.value=a,i.displayName=e.displayName,i.displayText=e.displayText,i.fillColor=null,i.fill=!1,i.gradient=!1;for(var A in this.options.backgroundStyle)i[A]=this.options.backgroundStyle[A];t=y.evaluate(o+s),d=new L.RadialBarMarker(this._latlng,i),this.addLayer(d)}}}});